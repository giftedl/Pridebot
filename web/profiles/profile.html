<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link
      rel="preload"
      href="https://cdn.discordapp.com/attachments/1101742240944107601/1219500201765507102/pridebotlogo.webp"
      as="image"
      fetchpriority="high"
    />
    <title>User Profile | Pridebot</title>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, shrink-to-fit=no"
    />
    <meta http-equiv="Content-Language" content="en" />
    <meta name="description" content="View user profile on Pridebot" />
    <meta name="og:description" content="View user profile on Pridebot" />
    <meta name="og:title" content="User Profile | Pridebot" />
    <meta
      name="og:image"
      content="https://cdn.discordapp.com/attachments/1101742240944107601/1219500201765507102/pridebotlogo.webp"
    />
    <meta property="og:site_name" content="Pridebot" />
    <meta name="theme-color" content="#FF00ea" />
    <link
      rel="icon"
      type="image/png"
      sizes="300x250"
      href="https://cdn.discordapp.com/emojis/1108228682184654908.png"
    />
    <link rel="stylesheet" href="../assets/bootstrap/css/bootstrap.min.css" />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=Inter:wght@300;400;500;600;700&display=swap"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../assets/css/webavatar.css" />
    <link rel="stylesheet" href="../assets/css/profiles.css" />
    <link rel="stylesheet" href="../assets/fonts/font-awesome.min.css" />
    <link rel="stylesheet" href="../assets/fonts/ionicons.min.css" />
    <script src="../assets/js/auth-client.js" defer></script>
    <style>
      .user-dropdown {
        display: none;
        align-items: center;
        position: relative;
        cursor: pointer;
        margin-left: 20px;
      }
      
      .user-avatar-nav {
        width: 36px;
        height: 36px;
        border-radius: 50%;
        border: 2px solid var(--main-color);
        transition: transform 0.3s ease;
      }
      
      .user-avatar-nav:hover {
        transform: scale(1.1);
      }
      
      .user-dropdown-menu {
        display: none;
        position: absolute;
        top: 50px;
        right: 0;
        background: white;
        border: 2px solid var(--main-color);
        border-radius: 10px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        min-width: 200px;
        z-index: 1000;
      }
      
      .user-dropdown-menu.show {
        display: block;
      }
      
      .user-dropdown-menu a,
      .user-dropdown-menu button {
        display: block;
        width: 100%;
        padding: 12px 20px;
        text-align: left;
        background: none;
        border: none;
        color: #333;
        text-decoration: none;
        cursor: pointer;
        transition: background 0.2s ease;
        font-size: 14px;
      }
      
      .user-dropdown-menu a:hover,
      .user-dropdown-menu button:hover {
        background: rgba(255, 0, 234, 0.1);
      }
      
      .user-dropdown-menu a:first-child {
        border-radius: 10px 10px 0 0;
      }
      
      .user-dropdown-menu button:last-child {
        border-radius: 0 0 10px 10px;
        color: #fc8181;
        border-top: 1px solid #e2e8f0;
      }
      
      .login-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 8px 20px;
        border-radius: 20px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-left: 20px;
      }
      
      .login-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
      }
      
      .edit-profile-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        padding: 10px 24px;
        border-radius: 10px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 15px;
        display: none;
      }
      
      .edit-profile-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
      }
      
      .edit-profile-btn i {
        margin-right: 8px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg fixed-top" id="top">
      <div class="container">
        <a class="navbar-brand" href="https://pridebot.xyz">
          <img
            src="https://cdn.discordapp.com/emojis/1108228682184654908.png?size=128"
            width="28"
            height="28"
            alt="Pridebot"
          />
          Pridebot
        </a>
        <button
          class="navbar-toggler"
          id="nav-toggle"
          aria-label="Toggle navigation"
        >
          <span></span>
          <span></span>
          <span></span>
        </button>
        <div class="navbar-nav" id="nav-menu">
          <a class="nav-link" href="https://profile.pridebot.xyz">Search</a>
          <a class="nav-link" href="https://pridebot.xyz/support">Support</a>
          <button class="login-btn" id="login-btn" onclick="AuthManager.login()">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
          <div class="user-dropdown" id="user-dropdown" onclick="toggleUserDropdown(event)">
            <img class="user-avatar-nav" id="user-avatar" src="" alt="User Avatar">
            <div class="user-dropdown-menu" id="user-dropdown-menu">
              <a href="/profiles/profile.html"><i class="fas fa-user"></i> My Profile</a>
              <a href="/webavatar.html"><i class="fas fa-images"></i> My Avatars</a>
              <button onclick="AuthManager.logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
              </button>
            </div>
          </div>
        </div>
      </div>
    </nav>

    <section class="profile-section">
      <div class="container">
        <div id="loading-container" class="loading-state">
          <div class="loading-card">
            <div class="loading-spinner"></div>
            <h3>Loading Profile...</h3>
            <p>Please wait while we fetch the profile data</p>
          </div>
        </div>

        <div id="profile-content" class="profile-content" style="display: none">
          <div class="profile-header">
            <div class="profile-avatar-container">
              <img
                id="profile-avatar"
                src="https://cdn.discordapp.com/emojis/1108228682184654908.png?size=512"
                alt="User Avatar"
                class="profile-avatar"
              />
              <div class="profile-badges" id="profile-badges"></div>
            </div>
            <div class="profile-info">
              <h1 class="profile-name" id="profile-name">Loading...</h1>
              <p class="profile-username" id="profile-username">@username</p>
              <div class="profile-pronouns" id="profile-pronouns"></div>
              <button class="edit-profile-btn" id="edit-profile-btn" onclick="window.location.href='edit.html'">
                <i class="fas fa-edit"></i> Edit Profile
              </button>
            </div>
          </div>

          <div
            class="profile-bio-section"
            id="bio-section"
            style="display: none"
          >
            <h3 class="section-label">
              <i class="fas fa-quote-left"></i> About Me
            </h3>
            <p class="profile-bio" id="profile-bio"></p>
          </div>

          <div class="profile-details">
            <div class="detail-card" id="age-card" style="display: none">
              <div class="detail-icon">
                <i class="fas fa-birthday-cake"></i>
              </div>
              <div class="detail-content">
                <span class="detail-label">Age</span>
                <span class="detail-value" id="profile-age"></span>
              </div>
            </div>

            <div class="detail-card" id="commands-card" style="display: none">
              <div class="detail-icon">
                <i class="fas fa-terminal"></i>
              </div>
              <div class="detail-content">
                <span class="detail-label">Commands Run</span>
                <span class="detail-value" id="profile-commands"></span>
              </div>
            </div>

            <div class="detail-card" id="sexuality-card" style="display: none">
              <div class="detail-icon">
                <i class="fas fa-heart"></i>
              </div>
              <div class="detail-content">
                <span class="detail-label">Sexual Orientation</span>
                <span class="detail-value" id="profile-sexuality"></span>
              </div>
            </div>

            <div class="detail-card" id="romantic-card" style="display: none">
              <div class="detail-icon">
                <i class="fas fa-heart"></i>
              </div>
              <div class="detail-content">
                <span class="detail-label">Romantic Orientation</span>
                <span class="detail-value" id="profile-romantic"></span>
              </div>
            </div>

            <div class="detail-card" id="gender-card" style="display: none">
              <div class="detail-icon">
                <i class="fas fa-user"></i>
              </div>
              <div class="detail-content">
                <span class="detail-label">Gender</span>
                <span class="detail-value" id="profile-gender"></span>
              </div>
            </div>

            <div class="detail-card" id="premium-card" style="display: none">
              <div class="detail-icon premium-icon">
                <i class="fas fa-crown"></i>
              </div>
              <div class="detail-content">
                <span class="detail-label">Premium Member</span>
                <span class="detail-value" id="profile-premium"></span>
              </div>
            </div>
          </div>

          <div
            class="profile-avatars-section"
            id="avatars-section"
            style="display: none"
          >
            <h3 class="section-label">
              <i class="fas fa-images"></i> Custom Avatars
            </h3>
            <div class="avatars-grid" id="custom-avatars"></div>
          </div>

          <div class="profile-links" id="links-section" style="display: none">
            <h3 class="section-label"><i class="fas fa-link"></i> Links</h3>
            <div class="links-grid" id="profile-links"></div>
          </div>
        </div>

        <div id="error-state" class="error-state" style="display: none">
          <div class="error-icon">
            <i class="fas fa-user-slash"></i>
          </div>
          <h3>Profile Not Found</h3>
          <p id="error-message">This user hasn't set up a profile yet.</p>
          <a href="https://profile.pridebot.xyz" class="btn btn-primary">
            <i class="fas fa-home"></i> Search Another Profile
          </a>
        </div>
      </div>
    </section>

    <div class="footer-dark">
      <div class="row"></div>
      <div class="row">
        <div class="col text-center">
          <p class="copyright" style="color: var(--text-color)">
            Pridebot ¬© 2023-2025
          </p>
          <p class="developed-by" style="color: var(--text-color)">
            Developed by
            <a href="https://sdriver1.dev" style="color: var(--main-color)"
              >Sdriver1</a
            >
          </p>
        </div>
      </div>
      <div class="container">
        <div class="footer-links" style="padding: 20px">
          <a
            href="https://github.com/Pridebot-Systems/Pridebot"
            class="footer-link-item"
            style="
              color: var(--text-color);
              margin-right: 20px;
              text-decoration: none;
            "
          >
            <i
              class="fa fa-github me-2"
              aria-hidden="true"
              style="
                font-size: 24px;
                vertical-align: middle;
                margin-bottom: 3px;
              "
            ></i>
            <span style="vertical-align: middle">GitHub</span>
          </a>
          <a
            href="https://discord.gg/guybqSTzdS"
            class="footer-link-item"
            style="
              color: var(--text-color);
              margin-right: 0px;
              text-decoration: none;
            "
          >
            <img
              src="https://cdn.discordapp.com/emojis/1108417509624926228.png"
              alt="Wumpus Store Icon"
              style="width: 24px; height: auto; vertical-align: middle"
            />
            <span style="vertical-align: middle">Support Server</span>
          </a>

          <div class="link-divider"></div>
          <a
            href="https://discordlist.gg/bot/1101256478632972369/vote"
            class="footer-link-item"
            style="
              color: var(--text-color);
              margin-right: 20px;
              text-decoration: none;
            "
          >
            <img
              src="https://discordlist.gg/img/brand/logo.svg"
              alt="discordlist Icon"
              style="width: 24px; height: auto; vertical-align: middle"
            />
            <span style="vertical-align: middle">DiscordList</span>
          </a>
          <a
            href="https://top.gg/bot/1101256478632972369/vote"
            class="footer-link-item"
            style="
              color: var (--text-color);
              margin-right: 0px;
              text-decoration: none;
            "
          >
            <img
              src="https://cdn.discordapp.com/emojis/1195866944482590731.png"
              alt="Topgg Icon"
              style="width: 24px; height: auto; vertical-align: middle"
            />
            <span style="vertical-align: middle">Top.gg</span>
          </a>
          <div class="link-divider"></div>
          <a
            href="https://x.com/pridebotdiscord?s=21&t=vvy-KvCpsjPgQFNN8_DkAQ"
            class="footer-link-item"
            style="
              color: var (--text-color);
              margin-right: 20px;
              text-decoration: none;
            "
          >
            <img
              src="https://upload.wikimedia.org/wikipedia/commons/5/53/X_logo_2023_original.svg"
              alt="Twitter Icon"
              style="width: 24px; height: auto; vertical-align: middle"
            />
            <span style="vertical-align: middle">ùïè/Twitter</span>
          </a>
          <a
            href="https://www.tiktok.com/@pridebotdiscord?_t=8kSLVmDoEcp&_r=1"
            class="footer-link-item"
            style="
              color: var (--text-color);
              margin-right: 0px;
              text-decoration: none;
            "
          >
            <img
              src="https://cdn.inspireuplift.com/uploads/images/seller_products/1690970852_a2-01.png"
              alt="Tiktok Icon"
              style="width: 24px; height: auto; vertical-align: middle"
            />
            <span style="vertical-align: middle">Tiktok</span>
          </a>
          <div class="link-divider"></div>
          <a
            href="https://pridebot.xyz/tos"
            class="footer-link-item"
            style="
              color: var (--text-color);
              margin-right: 20px;
              text-decoration: none;
            "
          >
            <span style="vertical-align: middle">TOS</span>
          </a>
          <a
            href="https://pridebot.xyz/privacy"
            class="footer-link-item"
            style="
              color: var (--text-color);
              margin-right: 30px;
              text-decoration: none;
            "
          >
            <span style="vertical-align: middle">Privacy Policy</span>
          </a>
        </div>
      </div>
    </div>

    <script src="../assets/js/jquery.min.js"></script>
    <script src="../assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="../assets/js/profiles.js"></script>
    <script>
      // Check if viewing own profile
      document.addEventListener('DOMContentLoaded', () => {
        const urlParams = new URLSearchParams(window.location.search);
        const profileUserId = urlParams.get('userId');
        const token = localStorage.getItem('pridebot_token');
        
        if (token && profileUserId) {
          try {
            const base64Url = token.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(atob(base64).split('').map(c => {
              return '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2);
            }).join(''));
            const decoded = JSON.parse(jsonPayload);
            
            if (decoded.userId === profileUserId) {
              document.getElementById('edit-profile-btn').style.display = 'inline-block';
            }
          } catch (error) {
            console.error('Error checking profile ownership:', error);
          }
        }
      });
      
      document
        .getElementById("nav-toggle")
        .addEventListener("click", function () {
          document.getElementById("nav-menu").classList.toggle("active");
        });
      document.querySelectorAll("#nav-menu .nav-link").forEach((link) => {
        link.addEventListener("click", () => {
          document.getElementById("nav-menu").classList.remove("active");
        });
      });
    </script>
  </body>
</html>
